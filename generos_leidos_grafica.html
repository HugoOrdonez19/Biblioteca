<!DOCTYPE html>
<html>
<head>
    <title>Géneros Leídos</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
	<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
</head>
<body>
    <canvas id="myChart"></canvas>
    <script>
        // Cargar datos desde el archivo JSON
        fetch('generos_leidos_grafica.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log("Datos cargados correctamente:", data);

                // Procesar datos
				
                const labels = data.map(item => item['G\u00e9neros']);
                const totalLeidos = data.map(item => item['Total Libros']);

                const ctx = document.getElementById('myChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Libros Leídos por Género',
                                data: totalLeidos,
                                backgroundColor: 'rgba(92, 165, 147, 1)',
                                hoverBackgroundColor: 'rgba(45, 108, 104, 1)',
                                yAxisID: 'y',
								borderRadius:8,							
                            },                      
                        ],
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false,
                            },
                            title: {
                                display: true,
                                text: 'Géneros Leídos',
                                font: {
                                    size: 20,
                                    weight: 'bold',
									family: 'Raleway',
                                },
								align: 'start'
                            },
							subtitle: {
								display: true,
								text: 'Cantidad de libros leídos agrupados por géneros',
								font: {
									size: 14,
									family: 'Raleway',
									weight: 'normal',
								},
								padding: {
                                     bottom: 30,
									 top: 0
								},
								align:'start',
							},
                            datalabels: {
                                display: true,
                                color: 'black',
                                anchor: 'end',
                                align: 'top',
                                font: {
                                    family: 'Raleway',
                                    size: 11,
                                    weight: 'normal',
                                },
                                formatter: value => value,
                            },
                        },
                        scales: {
                            y: {
                                type: 'linear',
                                position: 'left',
                                title: {
                                    display: true,
                                    text: 'Libros Leídos',
                                    font: {
                                        family: 'Raleway',
                                        size: 12,
                                        weight: 'normal',
                                    },
                                },
								ticks: {
									font: {
										size: 10, // Reduce el tamaño de los números en el eje Y
									},
								},
								grid: {
                                    drawOnChartArea: false,
								},
                            },                          
                            x: {
                                grid: {
                                    display: false, // Oculta las líneas verticales
                                },
                                ticks: {
                                    autoSkip: true,
                                    maxRotation: 90,
                                    minRotation: 0,
									font: {
										size: 10, // Reduce el tamaño de los números en el eje Y
									},
                                },
                                title: {
                                    display: true,
                                    text: 'Géneros',
                                    font: {
                                        family: 'Raleway',
                                        size: 12,
                                        weight: 'normal',
                                    },
                                },
                            },
                        },
                    },
                    plugins: [ChartDataLabels], // Activar el plugin
                });
            })
            .catch(error => console.error('Error al cargar el archivo JSON:', error));
    </script>
</body>
</html>